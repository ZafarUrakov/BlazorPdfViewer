@page "/"
@rendermode InteractiveAuto
@using Syncfusion.Blazor.SfPdfViewer

<style>
    /* Hide the default loading indicator and border */
    .e-pv-loading-indicator,
    .e-pv-loading,
    .e-spinner-pane {
    display: none !important;
    }

    /* Remove borders from PDF viewer container */
    .e-pv-viewer-container,
    .e-pdfviewer,
    .e-pv-viewer {
    border: none !important;
    }

    /* Remove any outline or border during loading */
    .e-pv-viewer-container::before,
    .e-pv-viewer-container::after {
    display: none !important;
    }

    .e-pv-viewer-container {
    background: white !important;
    }
</style>
<SfPdfViewer2 @ref="pdfViewer"
DocumentPath="@Path"
Height="100vh"
Width="100%"
EnableTextMarkupAnnotation="true"
EnableZoomOptimization="true"
EnablePinchZoom="true">
    <PdfViewerEvents ZoomChanged=@OnZoomChanged/>

</SfPdfViewer2>

@code
{
    private SfPdfViewer2 pdfViewer;
    private string Path { get; set; } = @"C:\Users\133\source\repos\BlazorPdfViewer\BlazorPdfViewer\wwwroot\ZoomLevels\Chapter_14_Zoom_100p.pdf";
    private int pendingZoom = 100;

    private async Task OnZoomChanged(ZoomChangeEventArgs e)
    {
        pendingZoom = e.CurrentZoomValue;
        var newPath = MapZoomToFile(pendingZoom);
        if (newPath != Path)
        {
            Path = newPath;
            await pdfViewer.LoadAsync(newPath);
            await pdfViewer.ZoomAsync(pendingZoom);
            StateHasChanged();
        }
    }
    
    private static string MapZoomToFile(int z) => z switch
    {
        >= 10 and < 25 => @"C:\Users\133\source\repos\BlazorPdfViewer\BlazorPdfViewer\wwwroot\ZoomLevels\Chapter_14_Zoom_10p.pdf",
        >= 25 and < 50 => @"C:\Users\133\source\repos\BlazorPdfViewer\BlazorPdfViewer\wwwroot\ZoomLevels\Chapter_14_Zoom_25p.pdf",
        >= 50 and < 75 => @"C:\Users\133\source\repos\BlazorPdfViewer\BlazorPdfViewer\wwwroot\ZoomLevels\Chapter_14_Zoom_50p.pdf",
        >= 75 and < 100 => @"C:\Users\133\source\repos\BlazorPdfViewer\BlazorPdfViewer\wwwroot\ZoomLevels\Chapter_14_Zoom_75p.pdf",
        >= 100 and < 125 => @"C:\Users\133\source\repos\BlazorPdfViewer\BlazorPdfViewer\wwwroot\ZoomLevels\Chapter_14_Zoom_100p.pdf",
        >= 125 and < 150 => @"C:\Users\133\source\repos\BlazorPdfViewer\BlazorPdfViewer\wwwroot\ZoomLevels\Chapter_14_Zoom_125p.pdf",
        >= 150 and < 200 => @"C:\Users\133\source\repos\BlazorPdfViewer\BlazorPdfViewer\wwwroot\ZoomLevels\Chapter_14_Zoom_150p.pdf",
        >= 200 and <= 400 => @"C:\Users\133\source\repos\BlazorPdfViewer\BlazorPdfViewer\wwwroot\ZoomLevels\Chapter_14_Zoom_200p.pdf",
        _ => @"C:\Users\133\source\repos\BlazorPdfViewer\BlazorPdfViewer\wwwroot\ZoomLevels\Chapter_14_Zoom_100p.pdf"
    };
}